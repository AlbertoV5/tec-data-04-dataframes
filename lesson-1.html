<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-07-20 Wed 00:49 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pandas Lesson-1</title>
<meta name="author" content="Alberto Valdez" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://albertov5.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://albertov5.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://albertov5.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://albertov5.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Pandas Lesson-1</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org94e8406">1. Working with Data in Python</a>
<ul>
<li><a href="#org3eab7d9">1.1. Creating a Pandas Series</a></li>
</ul>
</li>
<li><a href="#org33b5dbe">2. Creating a Pandas DataFrame</a>
<ul>
<li><a href="#orgb408062">2.1. With a List of Dictionaries</a></li>
<li><a href="#orgae9125a">2.2. With a Dictionary of Lists</a></li>
</ul>
</li>
<li><a href="#org8264a90">3. Inspecting Data</a>
<ul>
<li><a href="#orgb176433">3.1. Operations in Series</a></li>
<li><a href="#org680533e">3.2. Adding Series to DataFrame</a></li>
</ul>
</li>
<li><a href="#orgbdc93a7">4. Activity Training Grounds</a></li>
<li><a href="#orgd4023d9">5. Reading from a CSV file</a></li>
<li><a href="#org59b5593">6. Activity Good Reads</a></li>
<li><a href="#org3a89c37">7. Merging DataFrames</a></li>
<li><a href="#orged80345">8. Activity Merging DataFrames</a></li>
<li><a href="#org6875842">9. Formatting Syntax</a></li>
<li><a href="#org15312cb">10. Activity Formatting Numbers</a></li>
<li><a href="#org339dcba">11. Storing DataFrames</a></li>
<li><a href="#org9ec26ed">12. Pandas documentation</a></li>
<li><a href="#org200a2cd">13. Office Hours</a></li>
</ul>
</div>
</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><a href="./readme.html">&lt;&lt;Back</a></td>
</tr>
</tbody>
</table>

<p>
These notes are taken during the class. Using a single Python session for all Python code blocks, simulating a Jupyter Notebook. All the actual activities are done outside emacs in .ipynb files. I normally use <code>pathlib</code> instead of <code>os</code> but results are the same.
</p>


<div id="outline-container-org94e8406" class="outline-2">
<h2 id="org94e8406"><span class="section-number-2">1.</span> Working with Data in Python</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #339CDB;">import</span> pandas <span style="color: #339CDB;">as</span> pd
<span style="color: #339CDB;">from</span> pathlib <span style="color: #339CDB;">import</span> Path

<span style="color: #a9dbfa;">resources</span> = Path.cwd() / <span style="color: #c5937c;">"resources"</span>
<span style="color: #C586C0;">print</span>(resources)
</pre>
</div>

<pre class="example">
/Users/albertovaldez/tec-data/04-dataframes/resources
</pre>
</div>


<div id="outline-container-org3eab7d9" class="outline-3">
<h3 id="org3eab7d9"><span class="section-number-3">1.1.</span> Creating a Pandas Series</h3>
<div class="outline-text-3" id="text-1-1">
<p>
A series is a list with an explicit index, it preserves the index of its values regardless if they are sorted or not.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">series</span> = pd.Series([<span style="color: #c5937c;">"UCLA"</span>, <span style="color: #c5937c;">"UC Berkeley"</span>, <span style="color: #c5937c;">"UC Irvine"</span>])
<span style="color: #C586C0;">print</span>(series)
</pre>
</div>

<pre class="example">
0           UCLA
1    UC Berkeley
2      UC Irvine
dtype: object
</pre>
</div>
</div>
</div>

<div id="outline-container-org33b5dbe" class="outline-2">
<h2 id="org33b5dbe"><span class="section-number-2">2.</span> Creating a Pandas DataFrame</h2>
<div class="outline-text-2" id="text-2">
<p>
Can be created from lists of dictionaries or dictionaries of lists.
</p>
</div>

<div id="outline-container-orgb408062" class="outline-3">
<h3 id="orgb408062"><span class="section-number-3">2.1.</span> With a List of Dictionaries</h3>
<div class="outline-text-3" id="text-2-1">
<p>
As a list of dictionaries, the key of the dictionaries will be the titles of the columns and each row is each dictionary in the list.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">movies_dict</span> = [{<span style="color: #c5937c;">"Title"</span>: <span style="color: #c5937c;">"The Godfather"</span>, <span style="color: #c5937c;">"Year Released"</span>: <span style="color: #B5CEA8; font-weight: bold;">1972</span>},
               {<span style="color: #c5937c;">"Title"</span>: <span style="color: #c5937c;">"Pulp Fiction"</span>, <span style="color: #c5937c;">"Year Released"</span>:<span style="color: #B5CEA8; font-weight: bold;">1994</span>}]
<span style="color: #C586C0;">print</span>(pd.DataFrame(movies_dict))
</pre>
</div>

<pre class="example">
           Title  Year Released
0  The Godfather           1972
1   Pulp Fiction           1994
</pre>


<p>
If you have a key that is not present in the other dictionaries, Pandas will fill the missing data wiht <code>NaN</code> types (missing values).
</p>

<div class="org-src-container">
<pre class="src src-python">movies_dict.append({<span style="color: #c5937c;">"Title"</span>: <span style="color: #c5937c;">"Minions"</span>, <span style="color: #c5937c;">"Was it Good?"</span>: <span style="color: #339CDB;">False</span>})
<span style="color: #C586C0;">print</span>(pd.DataFrame(movies_dict))
</pre>
</div>

<pre class="example">
           Title  Year Released Was it Good?
0  The Godfather         1972.0          NaN
1   Pulp Fiction         1994.0          NaN
2        Minions            NaN        False
</pre>


<p>
You can have whatever type of data in the cell of the DataFrame, even dictionaries or more nested structures.
</p>
</div>
</div>

<div id="outline-container-orgae9125a" class="outline-3">
<h3 id="orgae9125a"><span class="section-number-3">2.2.</span> With a Dictionary of Lists</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Each key will represent a column and the lists represent the cells under the column. If we have many columns, the lists must have the same length, because Pandas can&rsquo;t know which value is missing.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">movies_dict</span> = {
    <span style="color: #c5937c;">"Title"</span>: [<span style="color: #c5937c;">"The Godfather"</span>, <span style="color: #c5937c;">"Pulp Fiction"</span>, <span style="color: #c5937c;">"Minions"</span>],
    <span style="color: #c5937c;">"Year Released"</span>: [<span style="color: #B5CEA8; font-weight: bold;">1972</span>, <span style="color: #B5CEA8; font-weight: bold;">1994</span>, <span style="color: #339CDB;">None</span>],
}
<span style="color: #C586C0;">print</span>(pd.DataFrame(movies_dict))
</pre>
</div>

<pre class="example">
           Title  Year Released
0  The Godfather         1972.0
1   Pulp Fiction         1994.0
2        Minions            NaN
</pre>
</div>
</div>
</div>

<div id="outline-container-org8264a90" class="outline-2">
<h2 id="org8264a90"><span class="section-number-2">3.</span> Inspecting Data</h2>
<div class="outline-text-2" id="text-3">
<p>
<code>head()</code> will show the DataFrame headers.
<code>describe()</code> will print out a summary statistic of the table.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">df</span> = pd.DataFrame(movies_dict)
<span style="color: #C586C0;">print</span>(<span style="color: #c5937c;">"Getting the heading:\n"</span>)
<span style="color: #C586C0;">print</span>(df.head(<span style="color: #B5CEA8; font-weight: bold;">1</span>))
<span style="color: #C586C0;">print</span>(<span style="color: #c5937c;">"Getting describe:\n"</span>)
<span style="color: #C586C0;">print</span>(df.describe())
<span style="color: #C586C0;">print</span>(<span style="color: #c5937c;">"Getting one series or df:\n"</span>)
<span style="color: #C586C0;">print</span>(df[<span style="color: #c5937c;">"Title"</span>].head())
</pre>
</div>

<pre class="example" id="org06df24f">
Getting the heading:

           Title  Year Released
0  The Godfather         1972.0
Getting describe:

       Year Released
count       2.000000
mean     1983.000000
std        15.556349
min      1972.000000
25%      1977.500000
50%      1983.000000
75%      1988.500000
max      1994.000000
Getting one series or df:

0    The Godfather
1     Pulp Fiction
2          Minions
Name: Title, dtype: object
</pre>
</div>

<div id="outline-container-orgb176433" class="outline-3">
<h3 id="orgb176433"><span class="section-number-3">3.1.</span> Operations in Series</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Series supports arithmetic operations and they are applied to the whole series.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">series</span> = df[<span style="color: #c5937c;">"Year Released"</span>] + <span style="color: #B5CEA8; font-weight: bold;">10</span>
<span style="color: #C586C0;">print</span>(series)
</pre>
</div>

<pre class="example">
0    1982.0
1    2004.0
2       NaN
Name: Year Released, dtype: float64
</pre>
</div>
</div>

<div id="outline-container-org680533e" class="outline-3">
<h3 id="org680533e"><span class="section-number-3">3.2.</span> Adding Series to DataFrame</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">df</span>[<span style="color: #c5937c;">"Year Released plus 10"</span>] = series
<span style="color: #C586C0;">print</span>(df)
</pre>
</div>

<pre class="example">
           Title  Year Released  Year Released plus 10
0  The Godfather         1972.0                 1982.0
1   Pulp Fiction         1994.0                 2004.0
2        Minions            NaN                    NaN
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdc93a7" class="outline-2">
<h2 id="orgbdc93a7"><span class="section-number-2">4.</span> Activity Training Grounds</h2>
<div class="outline-text-2" id="text-4">
<p>
The following html is the result of the Jupyter Notebook activity.
</p>

<embed type="text/html" src="./resources/4-1-Student-Resources/03-Stu_TrainingGrounds-DataFunctions/solved_TrainingGrounds_unsolved.html" width="100%" height="500">

<hr />
</div>
</div>

<div id="outline-container-orgd4023d9" class="outline-2">
<h2 id="orgd4023d9"><span class="section-number-2">5.</span> Reading from a CSV file</h2>
<div class="outline-text-2" id="text-5">
<p>
Pandas takes for granted a few things:
</p>
<ol class="org-ol">
<li>Assumes that the first row is the heading.</li>
<li>Assumes that each line in your file is a row in the dataframe.</li>
</ol>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">csv_df</span> = pd.read_csv(resources / <span style="color: #c5937c;">"schools_complete.csv"</span>)
<span style="color: #C586C0;">print</span>(csv_df.head())
</pre>
</div>

<pre class="example">
   School ID            school_name      type  size   budget
0          0      Huang High School  District  2917  1910635
1          1   Figueroa High School  District  2949  1884411
2          2    Shelton High School   Charter  1761  1056600
3          3  Hernandez High School  District  4635  3022020
4          4    Griffin High School   Charter  1468   917500
</pre>


<p>
Getting the columns.
</p>
<div class="org-src-container">
<pre class="src src-python">csv_df.columns
<span style="color: #579C4C;">#</span><span style="color: #579C4C;">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.rename.html</span>
<span style="color: #a9dbfa;">renamed_df</span> = csv_df.rename(columns={<span style="color: #c5937c;">"school_name"</span>: <span style="color: #c5937c;">"School Name"</span>})
view = renamed_df[[<span style="color: #c5937c;">"School Name"</span>, <span style="color: #c5937c;">"School ID"</span>]]
<span style="color: #C586C0;">print</span>(view.head())
</pre>
</div>

<pre class="example">
             School Name  School ID
0      Huang High School          0
1   Figueroa High School          1
2    Shelton High School          2
3  Hernandez High School          3
4    Griffin High School          4
</pre>


<p>
Whenever we access a DataFrame by slicing, we get a view of that DataFrame, so in order to work with a new version of that view as a DataFrame, we need to copy it.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">new_df</span> = renamed_df[[<span style="color: #c5937c;">"School Name"</span>]].copy()
<span style="color: #C586C0;">print</span>(new_df.head())
</pre>
</div>

<pre class="example">
             School Name
0      Huang High School
1   Figueroa High School
2    Shelton High School
3  Hernandez High School
4    Griffin High School
</pre>
</div>
</div>


<div id="outline-container-org59b5593" class="outline-2">
<h2 id="org59b5593"><span class="section-number-2">6.</span> Activity Good Reads</h2>
<div class="outline-text-2" id="text-6">
<p>
The following is the result of the Good Reads Jupyter Notebook.
</p>

<embed type="text/html" src="./resources/4-1-Student-Resources/05-Stu_GoodReadsCSV/Solved_GoodReads_unsolved.html" width="100%" height="500">

<hr />
</div>
</div>


<div id="outline-container-org3a89c37" class="outline-2">
<h2 id="org3a89c37"><span class="section-number-2">7.</span> Merging DataFrames</h2>
<div class="outline-text-2" id="text-7">
<p>
When merging data frames, the type of join determines what data to keep.
</p>

<ol class="org-ol">
<li><p>
Left Outer Join. Keeps all rows from table A, even in they don&rsquo;t exists in B.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>A</b></td>
<td class="org-left">B</td>
</tr>
</tbody>
</table></li>
<li><p>
Inner Join. This is the default DataFrame means of combining data. We only keep ids that are in both.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>A</b></td>
<td class="org-left"><b>B</b></td>
</tr>
</tbody>
</table></li>
<li><p>
Right Outer Join. Keep all rows from table B.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">A</td>
<td class="org-left"><b>B</b></td>
</tr>
</tbody>
</table></li>
</ol>

<p>
Pandas Defaults to inner join, which will use only columns that exist in both DataFrames.
</p>

<p>
Outer join will use columns from both DataFrames and fill in the missing values with <code>NaN</code>.
</p>
</div>
</div>


<div id="outline-container-orged80345" class="outline-2">
<h2 id="orged80345"><span class="section-number-2">8.</span> Activity Merging DataFrames</h2>
<div class="outline-text-2" id="text-8">
<p>
The following is the result of the Merging DataFrames Activity.
</p>

<embed type="text/html" src="./resources/4-1-Student-Resources/06-Ins_MergingDataFrames/Solved_Merging_unsolved.html" width="100%" height="500">

<hr />
</div>
</div>

<div id="outline-container-org6875842" class="outline-2">
<h2 id="org6875842"><span class="section-number-2">9.</span> Formatting Syntax</h2>
<div class="outline-text-2" id="text-9">
<p>
We can use the map function to apply an operation to each element of a Series and converts them into strings.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #a9dbfa;">file_df</span> = pd.DataFrame({<span style="color: #c5937c;">"avg_cost"</span>: [<span style="color: #B5CEA8; font-weight: bold;">0</span>,<span style="color: #B5CEA8; font-weight: bold;">1</span>,<span style="color: #B5CEA8; font-weight: bold;">2</span>,<span style="color: #B5CEA8; font-weight: bold;">3</span>]})
<span style="color: #a9dbfa;">file_df</span>[<span style="color: #c5937c;">"avg_cost"</span>] = file_df[<span style="color: #c5937c;">"avg_cost"</span>].<span style="color: #C586C0;">map</span>(<span style="color: #c5937c;">"${:.2f}"</span>.<span style="color: #C586C0;">format</span>)
<span style="color: #C586C0;">print</span>(file_df)
</pre>
</div>

<pre class="example">
  avg_cost
0    $0.00
1    $1.00
2    $2.00
3    $3.00
</pre>


<p>
We can&rsquo;t apply a format to an existing string, it has to be a number type.
</p>
</div>
</div>

<div id="outline-container-org15312cb" class="outline-2">
<h2 id="org15312cb"><span class="section-number-2">10.</span> Activity Formatting Numbers</h2>
<div class="outline-text-2" id="text-10">
<p>
The following is the result of the Format Mapping activity.
</p>

<embed type="text/html" src="./resources/4-1-Student-Resources/08-Evr_FormatMapping/Solved_Format_Mapping_unsolved.html" width="100%" height="500">

<hr />
</div>
</div>

<div id="outline-container-org339dcba" class="outline-2">
<h2 id="org339dcba"><span class="section-number-2">11.</span> Storing DataFrames</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-python">file_df.to_csv(resources / <span style="color: #c5937c;">"result.csv"</span>)
file_df.to_excel(resources / <span style="color: #c5937c;">"result.xlsx"</span>)

<span style="color: #339CDB;">for</span> file_name <span style="color: #339CDB;">in</span> resources.glob(<span style="color: #c5937c;">"*.[.csv .xlsx]*"</span>):
    <span style="color: #C586C0;">print</span>(file_name)
</pre>
</div>

<pre class="example">
/Users/albertovaldez/tec-data/04-dataframes/resources/students_complete.csv
/Users/albertovaldez/tec-data/04-dataframes/resources/result.csv
/Users/albertovaldez/tec-data/04-dataframes/resources/schools_complete.csv
/Users/albertovaldez/tec-data/04-dataframes/resources/result.xlsx
</pre>
</div>
</div>


<div id="outline-container-org9ec26ed" class="outline-2">
<h2 id="org9ec26ed"><span class="section-number-2">12.</span> Pandas documentation</h2>
<div class="outline-text-2" id="text-12">
<p>
The Pandas documentation is a great resource to learn how to use the library properly <sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>.
</p>
</div>
</div>

<div id="outline-container-org200a2cd" class="outline-2">
<h2 id="org200a2cd"><span class="section-number-2">13.</span> Office Hours</h2>
<div class="outline-text-2" id="text-13">
<p>
It is good idea to invest time in Readme files and repository organization!
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://pandas.pydata.org/docs/">https://pandas.pydata.org/docs/</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Alberto Valdez</p>
<p class="date">Created: 2022-07-20 Wed 00:49</p>
</div>
</body>
</html>
